package cn.sibat.bus

import java.io.{File, FileWriter}

import cn.sibat.bus.utils.LocationUtil

import scala.collection.mutable.ArrayBuffer

/**
  * 弗雷歇距离工具
  * 用于度量两个轨迹曲线的相似度
  * Created by kong on 2017/5/16.
  */
case class Point(lon: Double, lat: Double)

object FrechetUtils {

  /**
    * 计算i，j的弗雷歇距离
    * 使用递归计算出最大距离
    *
    * @param line1  轨迹1
    * @param line2  轨迹2
    * @param matrix 距离矩阵
    * @param i      轨迹1的第i个位置
    * @param j      轨迹2的第j个位置
    * @return
    */
  def calDistance(line1: Array[Point], line2: Array[Point], matrix: Array[Array[Double]], i: Int, j: Int): Double = {
    if (matrix(i)(j) > -1.0) {
      return matrix(i)(j)
    } else if (i == 0 && j == 0) {
      matrix(i)(j) = disP(line1(i), line2(j))
    } else if (i > 0 && j == 0) {
      matrix(i)(j) = math.max(calDistance(line1, line2, matrix, i - 1, j), disP(line1(i), line2(j)))
    } else if (i == 0 && j > 0) {
      matrix(i)(j) = math.max(calDistance(line1, line2, matrix, i, j - 1), disP(line1(i), line2(j)))
    } else if (i > 0 && j > 0) {
      matrix(i)(j) = math.max(math.min(math.min(calDistance(line1, line2, matrix, i - 1, j), calDistance(line1, line2, matrix, i - 1, j - 1)), calDistance(line1, line2, matrix, i, j - 1)), disP(line1(i), line2(j)))
    } else {
      matrix(i)(j) = Double.MaxValue
    }
    matrix(i)(j)
  }

  /**
    * 两点距离
    * atan2计算方式与asin计算方式
    *
    * @param p1 经纬度1
    * @param p2 经纬度2
    * @return
    */
  def disP(p1: Point, p2: Point): Double = {
    LocationUtil.distance(p1.lon, p1.lat, p2.lon, p2.lat)
    //LocationUtil.getDistance(p1.lon, p1.lat, p2.lon, p2.lat)
  }

  /**
    * 两轨迹曲线的相似度
    *
    * @param line1 轨迹1
    * @param line2 轨迹2
    * @return
    */
  def compareGesture(line1: Array[Point], line2: Array[Point]): Double = {
    var result = 0.0
    val matrix = new Array[Array[Double]](line1.length)
    for (i <- line1.indices) {
      for (j <- line2.indices) {
        val arr = new Array[Double](line2.length).map(_ - 1.0)
        matrix(i) = arr
      }
    }
    if (line1.length > 1 && line2.length > 1)
      result = calDistance(line1, line2, matrix, line1.length - 1, line2.length - 1)
    result
  }

  /**
    * 两轨迹曲线的相似度
    * 双矩阵版本，相对递归版效率更高
    * 效率快100倍
    *
    * @param line1 轨迹1
    * @param line2 轨迹2
    * @return
    */
  def compareGesture1(line1: Array[Point], line2: Array[Point]): Double = {
    var result = 0.0
    if (line1.length > 1 && line2.length > 1) {
      val matrix = new Array[Array[Double]](line1.length)
      for (i <- line1.indices) {
        val arr = new Array[Double](line2.length).map(_ - 1.0)
        matrix(i) = arr
        for (j <- line2.indices) {
          if (i == 0 && j == 0) {
            matrix(i)(j) = disP(line1(i), line2(j))
          } else if (i == 0 && j > 0) {
            matrix(i)(j) = math.max(disP(line1(i), line2(j)), disP(line1(i), line2(j - 1)))
          } else if (j == 0 && i > 0) {
            matrix(i)(j) = math.max(matrix(i - 1)(j), disP(line1(i), line2(j)))
          } else {
            matrix(i)(j) = math.max(math.min(math.min(matrix(i - 1)(j - 1), matrix(i - 1)(j)), matrix(i)(j - 1)), disP(line1(i), line2(j)))
          }
        }
      }
      result = matrix(line1.length - 1)(line2.length - 1)
    }
    result
  }

  /**
    * 经纬度数组转成结构体Point数组
    * （s"lon,lat"）
    *
    * @param line 经纬度数组
    * @return arr[point]
    */
  def lonLat2Point(line: Array[String]): Array[Point] = {
    line.map(s => Point(s.split(",")(0).toDouble, s.split(",")(1).toDouble))
  }

  /**
    * 经纬度数组转成结构体Point数组
    * (lon,lat)
    *
    * @param line 经纬度数组
    * @return arr[Point]
    */
  def lonLat2Point(line: Array[(Double, Double)]): Array[Point] = {
    line.map(p => Point(p._1, p._2))
  }

  def printMatrix(matrix: Array[Array[Double]]): Unit = {
    for (i <- matrix.indices) {
      for (j <- matrix(i).indices) {
        print(matrix(i)(j) + ",")
      }
      println()
    }
  }

  def main(args: Array[String]) {

    val lineM2913CheckPoint = "22.8066616547527,113.863993247961;\n22.805234,113.863976;\n22.804077,113.86374;\n22.803992,113.857864;\n22.803964,113.85545;\n22.803922,113.851194;\n22.803924,113.8496;\n22.803934,113.849075;\n22.803908,113.848752;\n22.803818,113.847368;\n22.803607,113.846775;\n22.803086,113.845642;\n22.802921,113.845281;\n22.802203,113.843857;\n22.801566,113.842494;\n22.801269,113.841906;\n22.800873,113.841129;\n22.800076,113.839512;\n22.800004,113.839351;\n22.799399,113.838016;\n22.799351,113.837909;\n22.799244,113.837683;\n22.798836,113.836861;\n22.79859,113.836328;\n22.798028,113.835198;\n22.797928,113.834998;\n22.797416,113.833972;\n22.79716,113.83329;\n22.797111,113.833157;\n22.797093,113.83311;\n22.797081,113.83308;\n22.797069,113.833049;\n22.797029,113.832943;\n22.796934,113.832694;\n22.796211,113.829941;\n22.795933,113.829066;\n22.795673,113.828456;\n22.795319,113.827868;\n22.795034,113.827401;\n22.794559,113.82682;\n22.793965,113.826249;\n22.793094,113.825647;\n22.792166,113.825168;\n22.79208,113.825124;\n22.791183,113.824933;\n22.79049,113.824872;\n22.790283,113.824849;\n22.789523,113.824627;\n22.789058,113.824667;\n22.787934,113.824924;\n22.785867,113.825341;\n22.784811,113.825555;\n22.784071,113.825753;\n22.781286,113.826571;\n22.775109,113.828472;\n22.77475,113.828782;\n22.774335,113.828917;\n22.773021,113.829341;\n22.772794,113.829411;\n22.772326,113.829564;\n22.772203,113.829604;\n22.771719,113.829749;\n22.770883,113.830001;\n22.770667,113.830067;\n22.768393,113.830752;\n22.768348,113.830766;\n22.767795,113.830964;\n22.767757,113.830978;\n22.767032,113.831201;\n22.766654,113.831288;\n22.766288,113.831373;\n22.765991,113.831389;\n22.765472,113.831419;\n22.765359,113.831416;\n22.765373,113.831578;\n22.765423,113.832149;\n22.765491,113.832923;\n22.765525,113.833288;\n22.765662,113.834786;\n22.76569,113.83511;\n22.765778,113.83609;\n22.765817,113.836527;\n22.765854,113.836946;\n22.765908,113.837556;\n22.765917,113.837675;\n22.766044,113.839352;\n22.766063,113.839607;\n22.766202,113.840948;\n22.766327,113.841609;\n22.766503,113.842083;\n22.766533,113.842166;\n22.766841,113.842985;\n22.766909,113.843118;\n22.767161,113.843611;\n22.767495,113.844265;\n22.76752,113.844317;\n22.767578,113.84444;\n22.767794,113.844876;\n22.767831,113.844948;\n22.768114,113.845536;\n22.768299,113.84592;\n22.768658,113.846677;\n22.76867,113.84674;\n22.768679,113.846793;\n22.768686,113.846873;\n22.768672,113.846955;\n22.768658,113.847002;\n22.768628,113.847087;\n22.768445,113.847247;\n22.768051,113.847589;\n22.767344,113.8482;\n22.766839,113.848551;\n22.766309,113.848819;\n22.76619,113.848878;\n22.7654,113.849214;\n22.76534,113.849239;\n22.764816,113.849422;\n22.764777,113.849436;\n22.764253,113.849584;\n22.763313,113.849734;\n22.762409,113.849804;\n22.761747,113.849796;\n22.761718,113.849796;\n22.761688,113.849793;\n22.761019,113.849728;\n22.760689,113.849694;\n22.759329,113.849453;\n22.758803,113.849316;\n22.758185,113.849153;\n22.757638,113.84901;\n22.757056,113.848856;\n22.756666,113.848781;\n22.756039,113.848659;\n22.755622,113.848577;\n22.755119,113.848481;\n22.754827,113.848424;\n22.754547,113.848387;\n22.754318,113.848368;\n22.754118,113.848353;\n22.752795,113.848247;\n22.752742,113.848245;\n22.751843,113.848211;\n22.75043,113.848162;\n22.75,113.848146;\n22.749067,113.848113;\n22.748325,113.84807;\n22.746933,113.847933;\n22.745865,113.847799;\n22.745589,113.847743;\n22.744809,113.847587;\n22.744672,113.84756;\n22.744111,113.847448;\n22.743905,113.847414;\n22.743515,113.84733;\n22.743446,113.847315;\n22.743077,113.847233;\n22.742677,113.84714;\n22.74248,113.847094;\n22.742162,113.847021;\n22.740302,113.846449;\n22.738137,113.845792;\n22.737528,113.845606;\n22.736856,113.845401;\n22.736367,113.845252;\n22.735723,113.845057;\n22.735005,113.84489;\n22.734272,113.844723;\n22.733688,113.844553;\n22.733735,113.844348;\n22.733902,113.843264;\n22.734001,113.842653;\n22.73395,113.842548;\n22.733994,113.842411;\n22.734145,113.841957;\n22.734237,113.841776;\n22.734518,113.841319;\n22.7349,113.840697;\n22.735459,113.839791;\n22.736251,113.838506;\n22.736404,113.838243;\n22.737176,113.837002;\n22.737685,113.836154;\n22.737961,113.835686;\n22.738786,113.834388;\n22.740419,113.83181;\n22.740637,113.831463;\n22.740665,113.83142;\n22.740816,113.831182;\n22.741024,113.830853;\n22.741328,113.830372;\n22.741427,113.830206;\n22.741367,113.830201;\n22.740885,113.830156;\n22.737442,113.82984;\n22.734383,113.829579;\n22.732864,113.829447;\n22.728081,113.829097;\n22.727421,113.829049;\n22.727316,113.829047;\n22.726985,113.829032;\n22.7261,113.82899;\n22.72452,113.828891;\n22.722916,113.828798;\n22.721883,113.828738;\n22.721517,113.828715;\n22.721014,113.828647;\n22.72084,113.828621;\n22.717153,113.827793;\n22.715332,113.827327;\n22.715147,113.82728;\n22.715094,113.827264;\n22.7148,113.827159;\n22.714457,113.827042;\n22.714063,113.826904;\n22.711046,113.825785;\n22.710798,113.825688;\n22.710708,113.825687;\n22.710448,113.825652;\n22.709846,113.825566;\n22.707661,113.825255;\n22.705198,113.824795;\n22.700382,113.824109;\n22.699761,113.82402;\n22.698258,113.823805;\n22.698329,113.823235;\n22.698533,113.82208;\n22.699882,113.819268;\n22.700672,113.817919;\n22.700739,113.817765;\n22.700682,113.817757;\n22.699938,113.817592;\n22.699377,113.817469;\n22.699163,113.817205;\n22.698446,113.816967;\n22.697975,113.816801;\n22.697475,113.816562;\n22.696759,113.816192;\n22.696123,113.81579;\n22.695389,113.815326;\n22.694882,113.815006;\n22.693302,113.81402;\n22.693229,113.813975;\n22.693054,113.813864;\n22.691082,113.812635;\n22.689488,113.811646;\n22.687647,113.810459;\n22.687282,113.810398;\n22.686786,113.810067;\n22.686295,113.809717;\n22.686232,113.809669;\n22.685947,113.809445;\n22.685711,113.809261;\n22.685416,113.809069;\n22.685331,113.808939;\n22.685263,113.808895;\n22.684436,113.808373;\n22.684084,113.808155;\n22.683676,113.807946;\n22.683465,113.807839;\n22.683368,113.807792;\n22.683048,113.807635;\n22.682013,113.807126;\n22.681421,113.806894;\n22.680412,113.8066;\n22.679974,113.806472;\n22.679716,113.806397;\n22.679677,113.80639;\n22.679526,113.80636;\n22.677853,113.806022;\n22.677089,113.805913;\n22.676732,113.806076;\n22.675733,113.806018;\n22.675367,113.806;\n22.675274,113.805991;\n22.674841,113.805973;\n22.674172,113.805948;\n22.67393,113.805757;\n22.67264,113.805708;\n22.670212,113.805612;\n22.66994,113.805888;\n22.669437,113.80592;\n22.668779,113.80606;\n22.668381,113.806193;\n22.668226,113.806231;\n22.667755,113.806413;\n22.667531,113.806468;\n22.667011,113.806879;\n22.666696,113.806924;\n22.666666,113.80695;\n22.66612,113.807392;\n22.665726,113.807856;\n22.66469,113.809247;\n22.664641,113.809616;\n22.664087,113.81041;\n22.663649,113.811003;\n22.663529,113.811157;\n22.663501,113.811189;\n22.662224,113.81267;\n22.661647,113.813235;\n22.66066,113.814155;\n22.659701,113.814772;\n22.657658,113.815872;\n22.654875,113.817549;\n22.654793,113.817603;\n22.653943,113.818225;\n22.650889,113.820826;\n22.650581,113.821087;\n22.650551,113.821114;\n22.650236,113.821376;\n22.64955,113.821976;\n22.648426,113.822905;\n22.647828,113.823315;\n22.647391,113.821831;\n22.647338,113.821729;\n22.646399,113.822232;\n22.646415,113.822467;\n22.6466325907548,113.822325210228"

    val arrCheckPoint_up = lineM2913CheckPoint.split(";\n").map(s => Point(s.split(",")(1).toDouble, s.split(",")(0).toDouble))

    val line1_down = "22.647746,113.823341;\n22.651351,113.820682;\n22.655386,113.817573;\n22.660281,113.814802;\n22.662797,113.812334;\n22.666854,113.807469;\n22.672065,113.806282;\n22.676339,113.806247;\n22.680402,113.807206;\n22.683777,113.808654;\n22.687842,113.811343;\n22.690017,113.812619;\n22.69415,113.815244;\n22.698081,113.817474;\n22.699114,113.820579;\n22.699253,113.824155;\n22.706178,113.825156;\n22.708684,113.825549;\n22.712185,113.826455;\n22.715898,113.827653;\n22.719861,113.828639;\n22.724687,113.829141;\n22.72868,113.829378;\n22.731193,113.829597;\n22.734879,113.829873;\n22.739428,113.830275;\n22.740249,113.831791;\n22.737157,113.836816;\n22.734143,113.841787;\n22.73811,113.846405;\n22.7428,113.847747;\n22.747762,113.848513;\n22.752863,113.848695;\n22.756194,113.849228;\n22.762572,113.8504;\n22.765738,113.849628;\n22.767636,113.844155;\n22.7662,113.839148;\n22.765751,113.83395;\n22.773366,113.829474;\n22.782474,113.82693;\n22.788621,113.825442;\n22.799467,113.838544;\n22.80148,113.84268;\n22.803607,113.847282;\n22.803838,113.858735;\n22.80391,113.86441;\n22.809145,113.876287;\n22.812428,113.877434;\n22.806662,113.86396"
    val arrLine1_down = line1_down.split(";\n").map(s => Point(s.split(",")(1).toDouble, s.split(",")(0).toDouble))
    val line1_up = "22.806662,113.86396\n22.804126,113.86289\n22.804036,113.857012\n22.803829,113.847155\n22.801782,113.842841\n22.799867,113.838875\n22.788334,113.824767\n22.781818,113.826378\n22.771008,113.829855\n22.765539,113.834144\n22.765983,113.839383\n22.766708,113.842816\n22.765881,113.848958\n22.761989,113.849757\n22.757129,113.848823\n22.751861,113.848151\n22.746331,113.847804\n22.744373,113.847447\n22.738603,113.845868\n22.73472,113.841109\n22.737523,113.836546\n22.73959,113.829979\n22.731541,113.829278\n22.728325,113.829069\n22.724865,113.828862\n22.720518,113.828504\n22.716456,113.827527\n22.713823,113.826721\n22.709432,113.825455\n22.704478,113.824576\n22.700326,113.823995\n22.69841,113.816872\n22.694096,113.814404\n22.689958,113.811858\n22.688382,113.810865\n22.683726,113.807924\n22.680332,113.806518\n22.674246,113.805904\n22.670343,113.805523\n22.666129,113.807321\n22.663121,113.811587\n22.654246,113.817962\n22.646683,113.822415"
    val arrLine1_up = line1_up.split("\n").map(s => Point(s.split(",")(1).toDouble, s.split(",")(0).toDouble))
    val line2_down = "22.682666,113.849548\n22.685664,113.844167\n22.688452,113.839732\n22.689964,113.837337\n22.692312,113.832707\n22.685775,113.831371\n22.683052,113.830012\n22.67956,113.828628\n22.677366,113.828405\n22.67366,113.827343\n22.671695,113.824299\n22.6698,113.821523\n22.666727,113.818885\n22.663569,113.821149\n22.659605,113.821074\n22.656529,113.820236\n22.654246,113.817962\n22.646971,113.82221"
    val arrLine2_down = line2_down.split("\n").map(s => Point(s.split(",")(1).toDouble, s.split(",")(0).toDouble))
    val line2_up = "22.646971,113.82221\n22.651351,113.820682\n22.656358,113.820512\n22.659541,113.821204\n22.661352,113.823085\n22.665732,113.819855\n22.669921,113.821963\n22.672345,113.825581\n22.673492,113.827331\n22.677185,113.82897\n22.678927,113.829016\n22.682824,113.830476\n22.685692,113.831921\n22.691698,113.83326\n22.689826,113.837137\n22.688125,113.839825\n22.685525,113.843932"
    val arrLine2_up = line2_up.split("\n").map(s => Point(s.split(",")(1).toDouble, s.split(",")(0).toDouble))
    val gps_up = "113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859558,22.811583\n113.859558,22.811583\n113.859558,22.811583\n113.859558,22.811583\n113.859558,22.811583\n113.859558,22.811583\n113.859558,22.811583\n113.859558,22.811583\n113.859558,22.811583\n113.859558,22.811583\n113.859558,22.811583\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.859505,22.811695\n113.860199,22.81146\n113.858192,22.812012\n113.85878,22.811958\n113.858871,22.812061\n113.860146,22.812132\n113.859291,22.812023\n113.861359,22.812056\n113.860023,22.812122\n113.862144,22.812016\n113.862862,22.811932\n113.861,22.812145\n113.863739,22.811935\n113.86219,22.812202\n113.864403,22.811941\n113.864342,22.812096\n113.865005,22.811941\n113.865044,22.811998\n113.86647,22.812132\n113.867256,22.812719\n113.868156,22.813396\n113.866913,22.812471\n113.868668,22.813572\n113.868668,22.813572\n113.869209,22.813063\n113.868698,22.81357\n113.869919,22.812403\n113.870224,22.812151\n113.870377,22.812004\n113.870934,22.811922\n113.870468,22.811951\n113.871506,22.812391\n113.872017,22.813116\n113.871574,22.812431\n113.872307,22.814075\n113.872307,22.814075\n113.872574,22.815128\n113.872871,22.816233\n113.872444,22.814571\n113.873116,22.8172\n113.872971,22.817387\n113.873116,22.817083\n113.872879,22.816919\n113.872772,22.816477\n113.872917,22.817022\n113.872658,22.816\n113.872658,22.816\n113.872719,22.816135\n113.872658,22.816\n113.872673,22.815926\n113.872597,22.815729\n113.872597,22.815729\n113.872597,22.815729\n113.872597,22.815729\n113.872467,22.81506\n113.872154,22.813988\n113.872482,22.815077\n113.872444,22.814896\n113.871712,22.812822\n113.871727,22.812805\n113.870056,22.811592\n113.871323,22.812349\n113.868958,22.810955\n113.868958,22.810955\n113.870544,22.81185\n113.867775,22.810247\n113.86895,22.810896\n113.866539,22.809523\n113.865295,22.808731\n113.864113,22.808077\n113.866005,22.809187\n113.863007,22.807655\n113.861832,22.807341\n113.863235,22.807701\n113.860825,22.807177\n113.860672,22.807127\n113.860062,22.807096\n113.860062,22.807096\n113.860191,22.807119\n113.859573,22.807089\n113.858887,22.807093\n113.859619,22.807112\n113.857979,22.807104\n113.858788,22.807116\n113.857285,22.807072\n113.857285,22.807072\n113.857956,22.807095\n113.856216,22.807047\n113.857628,22.807085\n113.85511,22.807072\n113.856453,22.807085\n113.85437,22.807043\n113.85437,22.807043\n113.85437,22.807043\n113.854286,22.807039\n113.854225,22.807022\n113.853844,22.807035\n113.854225,22.807022\n113.852989,22.807026\n113.852974,22.807028\n113.850525,22.806992\n113.852539,22.807024\n113.851845,22.807001\n113.848961,22.807032\n113.847595,22.807013\n113.847595,22.807013\n113.849228,22.806953\n113.846275,22.806942\n113.845139,22.806896\n113.84639,22.806881\n113.842461,22.806772\n113.843102,22.806782\n113.842804,22.806767\n113.841469,22.806473\n113.841988,22.806623\n113.841904,22.806602\n113.841469,22.806473\n113.840675,22.806076\n113.839874,22.805668\n113.841019,22.806223\n113.83886,22.805153\n113.837921,22.804686\n113.837921,22.804686\n113.838959,22.805168\n113.838623,22.804983\n113.837814,22.804556\n113.837456,22.804417\n113.836899,22.804239\n113.83709,22.804243\n113.836311,22.803976\n113.835701,22.803596\n113.836121,22.803892\n113.834259,22.802876\n113.834259,22.802876\n113.834587,22.80308\n113.834534,22.803047\n113.833008,22.802273\n113.833008,22.802273\n113.833626,22.802588\n113.832077,22.801765\n113.833435,22.802488\n113.830826,22.801168\n113.830826,22.801168\n113.829575,22.800549\n113.831573,22.801531\n113.828339,22.799995\n113.827011,22.799568\n113.828552,22.800076\n113.8255,22.799192\n113.824005,22.7988\n113.824005,22.7988\n113.825172,22.799088\n113.822655,22.79814\n113.822655,22.79814\n113.821465,22.797176\n113.821899,22.797558\n113.819954,22.794521\n113.819702,22.793097\n113.819977,22.794514\n113.819603,22.792007\n113.819778,22.791084\n113.819618,22.792017\n113.820053,22.79006\n113.819679,22.791592\n113.819824,22.790922\n113.820541,22.787903\n113.820221,22.789101\n113.820534,22.787592\n113.820541,22.787903\n113.820534,22.787592\n113.821014,22.786156\n113.82135,22.785002\n113.820969,22.786161\n113.821693,22.783953\n113.821152,22.785473\n113.822075,22.782757\n113.821449,22.784506\n113.822449,22.781584\n113.821747,22.78348\n113.822815,22.780315\n113.823189,22.779087\n113.822647,22.780558\n113.823586,22.777843\n113.824104,22.776648\n113.823692,22.77762\n113.824547,22.775784\n113.824593,22.775618\n113.824669,22.775446\n113.824593,22.775618\n113.824814,22.774952\n113.824814,22.774952\n113.824753,22.774857\n113.824684,22.774733\n113.824776,22.773762\n113.824722,22.773993\n113.825089,22.773016\n113.82489,22.773623\n113.825813,22.770885\n113.825066,22.772825\n113.826164,22.769648\n113.82634,22.768415\n113.826164,22.76996\n113.826263,22.767542\n113.825974,22.766651\n113.82621,22.767471\n113.82621,22.767471\n113.825981,22.766619\n113.82534,22.765415\n113.825874,22.766367\n113.825493,22.76545\n113.825066,22.764931\n113.82534,22.765415\n113.825066,22.764931\n113.825066,22.764931\n113.82486,22.764763\n113.824387,22.764175\n113.824776,22.764572\n113.824715,22.764524\n113.823975,22.763777\n113.824135,22.763788\n113.823944,22.76351\n113.822495,22.761162\n113.822113,22.760046\n113.822952,22.761894\n113.821869,22.759027\n113.822075,22.759657\n113.821983,22.759256\n113.821793,22.75852\n113.821747,22.757576\n113.821838,22.75864\n113.821823,22.758408\n113.821594,22.756332\n113.821411,22.754955\n113.821518,22.755743\n113.821457,22.755291\n113.821327,22.754105\n113.821205,22.752262\n113.821213,22.752728\n113.821098,22.751362\n113.820938,22.750263\n113.820969,22.750584\n113.820915,22.749973\n113.820702,22.748615\n113.820801,22.749037\n113.820663,22.747892\n113.820755,22.748802\n113.82061,22.747232\n113.820618,22.747562\n113.82058,22.747219\n113.82058,22.747219\n113.82058,22.747219\n113.82058,22.747219\n113.820564,22.746782\n113.820557,22.747173\n113.820496,22.746778\n113.820412,22.745457\n113.820389,22.746099\n113.820267,22.744385\n113.820381,22.745768\n113.820114,22.743002\n113.820221,22.744169\n113.820015,22.741873\n113.81987,22.740671\n113.819794,22.739708\n113.819923,22.741547\n113.819893,22.741184\n113.819794,22.740479\n113.819664,22.738958\n113.819702,22.738884\n113.819702,22.738884\n113.819664,22.738874\n113.819679,22.737877\n113.81945,22.736897\n113.819603,22.738119\n113.819489,22.736273\n113.819565,22.736807\n113.81926,22.734365\n113.819244,22.734657\n113.819176,22.73328\n113.81913,22.733576\n113.819115,22.732452\n113.819115,22.732452\n113.818848,22.731636\n113.818787,22.731958\n113.818619,22.731394\n113.818619,22.731394\n113.818848,22.731636\n113.818619,22.731394\n113.818451,22.730553\n113.818329,22.730484\n113.817726,22.729197\n113.817467,22.728666\n113.817863,22.729294\n113.816994,22.727827\n113.816406,22.726965\n113.816406,22.726965\n113.817032,22.727854\n113.814224,22.724176\n113.815384,22.725676\n113.813438,22.723164\n113.812851,22.722212\n113.813629,22.723362\n113.812431,22.72142\n113.812431,22.72142\n113.812088,22.720842\n113.81234,22.721247\n113.811615,22.719492\n113.81205,22.720675\n113.811066,22.718399\n113.811035,22.718374\n113.810654,22.717592\n113.810654,22.717592\n113.810493,22.717089\n113.810699,22.717382\n113.810532,22.717064\n113.810532,22.717064\n113.810532,22.717064\n113.810532,22.717064\n113.810532,22.717064\n113.810493,22.717089\n113.810532,22.717064\n113.810349,22.716736\n113.809792,22.713903\n113.810005,22.712809\n113.810005,22.712809\n113.809814,22.71426\n113.810349,22.711983\n113.810349,22.711864\n113.81134,22.710052\n113.811829,22.708923\n113.811615,22.70937\n113.811966,22.707651\n113.811974,22.708288\n113.812271,22.705563\n113.812271,22.705563\n113.812515,22.706009\n113.812271,22.705563\n113.812515,22.704708\n113.812477,22.703871\n113.812477,22.703871\n113.812477,22.703871\n113.812569,22.703466\n113.812477,22.703871\n113.812317,22.702482\n113.811966,22.701357\n113.812202,22.702467\n113.811317,22.700014\n113.81041,22.6984\n113.810181,22.698002\n113.809631,22.697176\n113.810081,22.697887\n113.809128,22.696562\n113.809357,22.696892\n113.80864,22.69574\n113.806908,22.693104\n113.806664,22.69269\n113.805763,22.691219\n113.805649,22.690971\n113.805695,22.691208\n113.80529,22.690287\n113.804787,22.689457\n113.804787,22.689457\n113.80442,22.688911\n113.804771,22.689707\n113.80442,22.688911\n113.803932,22.688248\n113.803627,22.687788\n113.803894,22.688181\n113.803352,22.687382\n113.803139,22.68704\n113.803223,22.687189\n113.802567,22.686089\n113.802917,22.686728\n113.802139,22.685123\n113.801689,22.683926\n113.80201,22.684841\n113.80143,22.682983\n113.801247,22.682343\n113.800865,22.680004\n113.801041,22.681051\n113.800774,22.678802\n113.800781,22.679056\n113.800735,22.67849\n113.800735,22.67849\n113.80072,22.678408\n113.800652,22.677172\n113.800728,22.678072\n113.800652,22.676722\n113.800636,22.677059\n113.800568,22.674706\n113.800529,22.673502\n113.800529,22.673502\n113.800606,22.675394\n113.800537,22.672859\n113.800629,22.672005\n113.800476,22.672991\n113.800758,22.671469\n113.800758,22.671469\n113.800629,22.672005\n113.800758,22.671469\n113.80088,22.671196\n113.800758,22.671469\n113.801651,22.669785\n113.801102,22.670628\n113.801903,22.669369\n113.801895,22.669319\n113.802505,22.668852\n113.803192,22.668337\n113.802208,22.669022\n113.804001,22.667711\n113.804703,22.667229\n113.804077,22.667662\n113.805618,22.666548\n113.80603,22.666328\n113.805489,22.666626\n113.80603,22.666328\n113.806351,22.666084\n113.807014,22.6656\n113.807014,22.6656\n113.807899,22.664824\n113.80658,22.665934\n113.808739,22.6639\n113.808502,22.664202\n113.810303,22.661531\n113.811005,22.660225\n113.810356,22.661343\n113.811714,22.658924\n113.812401,22.657776\n113.812103,22.658167\n113.812981,22.656864\n113.812729,22.657207"
    val arrGps_up = gps_up.split("\n").distinct.map(s => Point(s.split(",")(0).toDouble, s.split(",")(1).toDouble))

    val gps_down = "113.81369,22.656061\n113.814537,22.655102\n113.815376,22.654112\n113.813995,22.655756\n113.816078,22.653299\n113.81649,22.652649\n113.815941,22.653492\n113.817139,22.651896\n113.817787,22.651169\n113.817253,22.651773\n113.817177,22.650728\n113.817177,22.650728\n113.817535,22.650827\n113.81694,22.649872\n113.81723,22.649387\n113.817184,22.649858\n113.817474,22.649254\n113.817505,22.649294\n113.817474,22.649485\n113.817474,22.649485\n113.81723,22.649387\n113.81723,22.649387\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817429,22.649715\n113.817474,22.649485\n113.817039,22.650637\n113.817039,22.650637\n113.816925,22.650415\n113.817726,22.650951\n113.817474,22.650763\n113.818192,22.650721\n113.817886,22.650965\n113.818733,22.650032\n113.819054,22.649721\n113.819305,22.649963\n113.818939,22.649719\n113.818947,22.650446\n113.818909,22.650448\n113.817581,22.652103\n113.816994,22.652777\n113.817314,22.652369\n113.816338,22.653492\n113.816582,22.653234\n113.815918,22.654039\n113.816147,22.653742\n113.815849,22.654156\n113.815918,22.654039\n113.815811,22.654202\n113.815674,22.654364\n113.814415,22.655767\n113.8153,22.654799\n113.815186,22.654932\n113.813538,22.656786\n113.812775,22.657801\n113.813248,22.657152\n113.812881,22.657633\n113.812431,22.658337\n113.812469,22.658257\n113.811516,22.659857\n113.811516,22.659857\n113.812134,22.658747\n113.810951,22.660872\n113.811455,22.659929\n113.810432,22.661848\n113.809929,22.662825\n113.810127,22.662287\n113.81002,22.662485\n113.809357,22.663679\n113.809357,22.663679\n113.809357,22.663679\n113.809746,22.663034\n113.809372,22.663549\n113.807831,22.665432\n113.80838,22.664761\n113.80793,22.665224\n113.807205,22.665922\n113.807213,22.665796\n113.805634,22.667028\n113.806938,22.665989\n113.804657,22.667782\n113.805496,22.667074\n113.80368,22.668484\n113.802864,22.669209\n113.802231,22.669922\n113.803238,22.668777\n113.802376,22.66971\n113.801964,22.670259\n113.801689,22.6707\n113.801964,22.670259\n113.801613,22.670818\n113.801567,22.670931\n113.801689,22.6707\n113.801437,22.671232\n113.801178,22.674711\n113.801086,22.673754\n113.801117,22.674162\n113.801178,22.675468\n113.801163,22.674831\n113.801155,22.675169\n113.801216,22.677113\n113.801186,22.676037\n113.80127,22.677755\n113.80127,22.677835\n113.801277,22.677898\n113.801277,22.677898\n113.801277,22.677898\n113.801277,22.677898\n113.801239,22.678347\n113.801239,22.678501\n113.801369,22.679296\n113.801392,22.679993\n113.801392,22.679993\n113.801353,22.679173\n113.801529,22.680988\n113.801361,22.679598\n113.801529,22.680988\n113.801552,22.681093\n113.801888,22.682608\n113.801888,22.682608\n113.802193,22.683693\n113.801735,22.681963\n113.802505,22.684576\n113.802017,22.683121\n113.802979,22.685637\n113.80349,22.686541\n113.80349,22.686541\n113.80291,22.685501\n113.803139,22.685957\n113.803917,22.687317\n113.804504,22.688259\n113.803627,22.686777\n113.803734,22.686974\n113.804504,22.688259\n113.804855,22.688822\n113.804855,22.688822\n113.804802,22.68869\n113.805443,22.689682\n113.805824,22.690279\n113.806229,22.690996\n113.806694,22.691772\n113.806091,22.690685\n113.80632,22.691044\n113.807068,22.692245\n113.807236,22.69249\n113.807465,22.692904\n113.807945,22.693672\n113.80761,22.693127\n113.80761,22.693127\n113.809196,22.695652\n113.808983,22.695326\n113.809616,22.69631\n113.810158,22.697046\n113.809982,22.696831\n113.810577,22.697716\n113.810577,22.697716\n113.810966,22.698408\n113.810966,22.698408\n113.810249,22.697239\n113.810966,22.698408\n113.811516,22.699223\n113.810791,22.698099\n113.812401,22.700975\n113.812019,22.700274\n113.812019,22.700274\n113.81263,22.70166\n113.812866,22.702656\n113.812454,22.701351\n113.812637,22.702\n113.81292,22.703142\n113.812927,22.703171\n113.812927,22.703171\n113.812927,22.703171\n113.812927,22.703171\n113.812866,22.702656\n113.813026,22.703726\n113.813103,22.704617\n113.81295,22.703505\n113.813042,22.705233\n113.813034,22.704105\n113.812927,22.70636\n113.813042,22.705145\n113.813019,22.705421\n113.81266,22.707726\n113.812477,22.708666\n113.812584,22.708096\n113.812485,22.708387\n113.812271,22.709192\n113.812218,22.708944\n113.812157,22.709091\n113.811417,22.710913\n113.810928,22.711937\n113.811104,22.711407\n113.81041,22.71303\n113.810402,22.713762\n113.810341,22.713594\n113.810349,22.714577\n113.810509,22.715706\n113.810509,22.715706\n113.810272,22.714102\n113.81028,22.714796\n113.81073,22.716412\n113.81073,22.716412\n113.81073,22.716412\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.81073,22.716412\n113.81073,22.716412\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810982,22.71702\n113.810982,22.71702\n113.810875,22.716749\n113.811119,22.71726\n113.811607,22.718409\n113.81134,22.717722\n113.812027,22.719364\n113.811493,22.718145\n113.812141,22.719654\n113.81279,22.721146\n113.812553,22.720461\n113.813232,22.721956\n113.813446,22.722128\n113.81469,22.723967\n113.815201,22.72476\n113.815109,22.724432\n113.816689,22.726782\n113.816696,22.726721\n113.817856,22.728142\n113.818161,22.728577\n113.817932,22.728266\n113.818527,22.729317\n113.818245,22.728794\n113.818817,22.730215\n113.818871,22.730368\n113.819023,22.730751\n113.819099,22.731026\n113.819023,22.730751\n113.819214,22.731537\n113.819214,22.731537\n113.819489,22.732462\n113.819366,22.731945\n113.819763,22.734535\n113.819763,22.734426\n113.819839,22.735235\n113.819992,22.737244\n113.819778,22.735397\n113.820114,22.738176\n113.820023,22.737909\n113.820091,22.738207\n113.820114,22.738176\n113.820091,22.738207\n113.820114,22.738276\n113.820274,22.739231\n113.820366,22.740067\n113.82029,22.739424\n113.820488,22.741121\n113.820488,22.741121\n113.82048,22.741686\n113.820961,22.745832\n113.820961,22.745832\n113.820816,22.744814\n113.821022,22.746197\n113.821022,22.746197\n113.820961,22.745832\n113.821022,22.746197\n113.821022,22.746197\n113.821022,22.746197\n113.821098,22.746784\n113.821098,22.746784\n113.821022,22.746197\n113.82119,22.747326\n113.82119,22.747326\n113.821182,22.747307\n113.821259,22.747807\n113.821289,22.748564\n113.821289,22.748564\n113.821243,22.747665\n113.821426,22.749662\n113.821426,22.749662\n113.821396,22.749506\n113.821625,22.751717\n113.821693,22.752256\n113.821693,22.752256\n113.821655,22.751907\n113.821701,22.752327\n113.821701,22.752327\n113.821701,22.752327\n113.821793,22.753176\n113.821716,22.752472\n113.82193,22.754564\n113.82206,22.755468\n113.822105,22.756086\n113.822037,22.755424\n113.822166,22.756693\n113.822289,22.757675\n113.822144,22.756746\n113.822289,22.757675\n113.822464,22.758768\n113.822342,22.758432\n113.822624,22.759687\n113.822624,22.759687\n113.82299,22.760826\n113.822517,22.759596\n113.82341,22.761662\n113.823792,22.762392\n113.823296,22.761457\n113.824448,22.763315\n113.82489,22.763876\n113.82428,22.763119\n113.824921,22.763933\n113.824921,22.763933\n113.824921,22.763933\n113.82489,22.763876\n113.824921,22.763933\n113.824921,22.763933\n113.825615,22.764824\n113.825615,22.764824\n113.826027,22.765392\n113.825966,22.765356\n113.82637,22.766508\n113.82637,22.766508\n113.826561,22.767464\n113.826218,22.766081\n113.826591,22.7679\n113.826591,22.7679\n113.826591,22.7679\n113.826569,22.768377\n113.826286,22.770016\n113.825455,22.772532\n113.826073,22.770674\n113.825188,22.773676\n113.825188,22.773676\n113.825066,22.774376\n113.825195,22.773582\n113.824829,22.775261\n113.824577,22.776199\n113.824745,22.775677\n113.824303,22.776705\n113.824547,22.776211\n113.823952,22.777756\n113.823502,22.779156\n113.823853,22.778032\n113.822868,22.781813\n113.822945,22.781189\n113.822563,22.782455\n113.822342,22.783396\n113.822815,22.782181\n113.82206,22.784582\n113.82206,22.784582\n113.822037,22.78446\n113.821617,22.786041\n113.821342,22.786823\n113.821465,22.786301\n113.821243,22.786964\n113.820892,22.788424\n113.820702,22.789532\n113.820702,22.789532\n113.820885,22.788519\n113.82045,22.790771\n113.820274,22.791672\n113.820328,22.791405\n113.820091,22.792532\n113.819954,22.793503\n113.820068,22.792547\n113.820168,22.794643\n113.821648,22.797115\n113.820343,22.795168\n113.822853,22.798096\n113.822594,22.797918\n113.824265,22.798777\n113.824265,22.798777\n113.827118,22.799503\n113.825996,22.799273\n113.82843,22.799932\n113.829407,22.800362\n113.832535,22.80184\n113.833473,22.802202\n113.832642,22.80192\n113.833786,22.802368\n113.833786,22.802368\n113.833572,22.802294\n113.834969,22.803051\n113.835365,22.803196\n113.835732,22.803389\n113.835091,22.803112\n113.835732,22.803389\n113.836189,22.803661\n113.83696,22.804005\n113.83609,22.803598\n113.83696,22.804005\n113.837555,22.804276\n113.838341,22.804663\n113.839226,22.805101\n113.838013,22.804512\n113.839912,22.805391\n113.839859,22.805374\n113.840546,22.805704\n113.841301,22.806072\n113.84021,22.805553\n113.842239,22.806396\n113.842102,22.80637\n113.843063,22.806526\n113.843987,22.80658\n113.843338,22.806589\n113.84481,22.806597\n113.845284,22.806572\n113.845192,22.80662\n113.845421,22.806602\n113.848175,22.806656\n113.846634,22.806702\n113.849419,22.806684\n113.849419,22.806684\n113.8508,22.806732\n113.849312,22.806732\n113.852135,22.806717\n113.853233,22.806755\n113.852478,22.806761\n113.854172,22.806763\n113.853958,22.80678\n113.856346,22.806812\n113.857567,22.806824\n113.856476,22.806828\n113.858055,22.806829\n113.858055,22.806829\n113.858467,22.806856\n113.858627,22.80685\n113.859779,22.806852\n113.859406,22.806904\n113.860725,22.806923\n113.862045,22.807133\n113.860878,22.806974\n113.863846,22.807699\n113.863968,22.807753\n113.863968,22.807753\n113.863968,22.807753\n113.863968,22.807753\n113.864174,22.807852\n113.864174,22.807852\n113.866173,22.809\n113.867447,22.809767\n113.867447,22.809767\n113.865677,22.808697\n113.868637,22.810465\n113.868637,22.810465\n113.869789,22.811144\n113.868607,22.810471\n113.870705,22.811668\n113.870316,22.811466\n113.871147,22.811956\n113.87104,22.811913\n113.871666,22.812416\n113.871346,22.812128"
    val arrGps_down = gps_down.split("\n").distinct.map(s => Point(s.split(",")(0).toDouble, s.split(",")(1).toDouble))
    //    val up2down = compareGesture(arrLine1_up, arrGps_down)
    //val up2up = compareGesture(arrLine1_up, arrGps_up)
    //    val down2up = compareGesture(arrLine1_down, arrGps_up)
    //    val down2down = compareGesture(arrLine1_down, arrGps_down)
    //    val down2down1 = compareGesture1(arrLine1_down, arrGps_down)
    //    println(down2down, down2down1)
    //    val line1Down = down2down
    //    val line2Down = compareGesture(arrLine2_up, arrGps_down)
//    val bf = new ArrayBuffer[Point]()
//    val arrGps = arrGps_up ++ arrGps_down ++ arrGps_up ++ arrGps_down ++ arrGps_up ++ arrGps_down ++ arrGps_up ++ arrGps_down ++ arrGps_up ++ arrGps_down
//    val fw = new FileWriter(new File("D:/testData/公交处/timeLine6.txt"), true)
//    //compareGesture(arrLine1_up, arrGps)
//    arrGps.foreach(s => {
//      bf.+=(s)
//      val start = System.currentTimeMillis()
//      val checkPoint2up = compareGesture1(arrLine1_up, bf.toArray)
//      val end = System.currentTimeMillis()
//      println(bf.length, end - start)
//      fw.write(bf.length + "," + (end - start) + "\n")
//      fw.flush()
//    })
//    fw.close()

    //    println(s"up2down,$up2down\ndown2down,$down2down\nup2up,$up2up\ndown2up,$down2up")
    //    println(s"Line1DownVsLine2Down:$line1Down,$line2Down")

    //异常值检测
    //    var max = Double.MinValue
    //    for (i <- 0 until arrGps_up.length-2){
    //      val dis= disP(arrGps_up(i),arrGps_up(i+1))
    //      if (max < dis)
    //        println(arrGps_up(i)+","+arrGps_up(i+1)+","+dis)
    //      max = math.max(max,dis)
    //    }
    //    println(max)

    val a1 = "113.81369,22.656061\n113.814537,22.655102\n113.815376,22.654112\n113.813995,22.655756\n113.816078,22.653299\n113.81649,22.652649\n113.815941,22.653492\n113.817139,22.651896\n113.817787,22.651169\n113.817253,22.651773\n113.817177,22.650728\n113.817177,22.650728\n113.817535,22.650827\n113.81694,22.649872\n113.81723,22.649387\n113.817184,22.649858\n113.817474,22.649254\n113.817505,22.649294\n113.817474,22.649485\n113.817474,22.649485\n113.81723,22.649387\n113.81723,22.649387\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817474,22.649485\n113.817429,22.649715\n113.817474,22.649485\n113.817039,22.650637\n113.817039,22.650637\n113.816925,22.650415\n113.817726,22.650951\n113.817474,22.650763\n113.818192,22.650721\n113.817886,22.650965\n113.818733,22.650032\n113.819054,22.649721\n113.819305,22.649963\n113.818939,22.649719\n113.818947,22.650446\n113.818909,22.650448\n113.817581,22.652103\n113.816994,22.652777\n113.817314,22.652369\n113.816338,22.653492\n113.816582,22.653234\n113.815918,22.654039\n113.816147,22.653742\n113.815849,22.654156\n113.815918,22.654039\n113.815811,22.654202\n113.815674,22.654364\n113.814415,22.655767\n113.8153,22.654799\n113.815186,22.654932\n113.813538,22.656786\n113.812775,22.657801\n113.813248,22.657152\n113.812881,22.657633\n113.812431,22.658337\n113.812469,22.658257\n113.811516,22.659857\n113.811516,22.659857\n113.812134,22.658747\n113.810951,22.660872\n113.811455,22.659929\n113.810432,22.661848\n113.809929,22.662825\n113.810127,22.662287\n113.81002,22.662485\n113.809357,22.663679\n113.809357,22.663679\n113.809357,22.663679\n113.809746,22.663034\n113.809372,22.663549\n113.807831,22.665432\n113.80838,22.664761\n113.80793,22.665224\n113.807205,22.665922\n113.807213,22.665796\n113.805634,22.667028\n113.806938,22.665989\n113.804657,22.667782\n113.805496,22.667074\n113.80368,22.668484\n113.802864,22.669209\n113.802231,22.669922\n113.803238,22.668777\n113.802376,22.66971\n113.801964,22.670259\n113.801689,22.6707\n113.801964,22.670259\n113.801613,22.670818\n113.801567,22.670931\n113.801689,22.6707\n113.801437,22.671232\n113.801178,22.674711\n113.801086,22.673754\n113.801117,22.674162\n113.801178,22.675468\n113.801163,22.674831\n113.801155,22.675169\n113.801216,22.677113\n113.801186,22.676037\n113.80127,22.677755\n113.80127,22.677835\n113.801277,22.677898\n113.801277,22.677898\n113.801277,22.677898\n113.801277,22.677898\n113.801239,22.678347\n113.801239,22.678501\n113.801369,22.679296\n113.801392,22.679993\n113.801392,22.679993\n113.801353,22.679173\n113.801529,22.680988\n113.801361,22.679598\n113.801529,22.680988\n113.801552,22.681093\n113.801888,22.682608\n113.801888,22.682608\n113.802193,22.683693\n113.801735,22.681963\n113.802505,22.684576\n113.802017,22.683121\n113.802979,22.685637\n113.80349,22.686541\n113.80349,22.686541\n113.80291,22.685501\n113.803139,22.685957\n113.803917,22.687317\n113.804504,22.688259\n113.803627,22.686777\n113.803734,22.686974\n113.804504,22.688259\n113.804855,22.688822\n113.804855,22.688822\n113.804802,22.68869\n113.805443,22.689682\n113.805824,22.690279\n113.806229,22.690996\n113.806694,22.691772\n113.806091,22.690685\n113.80632,22.691044\n113.807068,22.692245\n113.807236,22.69249\n113.807465,22.692904\n113.807945,22.693672\n113.80761,22.693127\n113.80761,22.693127\n113.809196,22.695652\n113.808983,22.695326\n113.809616,22.69631\n113.810158,22.697046\n113.809982,22.696831\n113.810577,22.697716\n113.810577,22.697716\n113.810966,22.698408\n113.810966,22.698408\n113.810249,22.697239\n113.810966,22.698408\n113.811516,22.699223\n113.810791,22.698099\n113.812401,22.700975\n113.812019,22.700274\n113.812019,22.700274\n113.81263,22.70166\n113.812866,22.702656\n113.812454,22.701351\n113.812637,22.702\n113.81292,22.703142\n113.812927,22.703171\n113.812927,22.703171\n113.812927,22.703171\n113.812927,22.703171\n113.812866,22.702656\n113.813026,22.703726\n113.813103,22.704617\n113.81295,22.703505\n113.813042,22.705233\n113.813034,22.704105\n113.812927,22.70636\n113.813042,22.705145\n113.813019,22.705421\n113.81266,22.707726\n113.812477,22.708666\n113.812584,22.708096\n113.812485,22.708387\n113.812271,22.709192\n113.812218,22.708944\n113.812157,22.709091\n113.811417,22.710913\n113.810928,22.711937\n113.811104,22.711407\n113.81041,22.71303\n113.810402,22.713762\n113.810341,22.713594\n113.810349,22.714577\n113.810509,22.715706\n113.810509,22.715706\n113.810272,22.714102\n113.81028,22.714796\n113.81073,22.716412\n113.81073,22.716412\n113.81073,22.716412\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.81073,22.716412\n113.81073,22.716412\n113.810753,22.716423\n113.810753,22.716423\n113.810753,22.716423\n113.810982,22.71702\n113.810982,22.71702\n113.810875,22.716749\n113.811119,22.71726\n113.811607,22.718409\n113.81134,22.717722\n113.812027,22.719364\n113.811493,22.718145\n113.812141,22.719654\n113.81279,22.721146\n113.812553,22.720461\n113.813232,22.721956\n113.813446,22.722128\n113.81469,22.723967\n113.815201,22.72476\n113.815109,22.724432\n113.816689,22.726782\n113.816696,22.726721\n113.817856,22.728142\n113.818161,22.728577\n113.817932,22.728266\n113.818527,22.729317\n113.818245,22.728794\n113.818817,22.730215\n113.818871,22.730368\n113.819023,22.730751\n113.819099,22.731026\n113.819023,22.730751\n113.819214,22.731537\n113.819214,22.731537\n113.819489,22.732462\n113.819366,22.731945\n113.819763,22.734535\n113.819763,22.734426\n113.819839,22.735235\n113.819992,22.737244\n113.819778,22.735397\n113.820114,22.738176\n113.820023,22.737909\n113.820091,22.738207\n113.820114,22.738176\n113.820091,22.738207\n113.820114,22.738276\n113.820274,22.739231\n113.820366,22.740067\n113.82029,22.739424\n113.820488,22.741121\n113.820488,22.741121\n113.82048,22.741686\n113.820961,22.745832\n113.820961,22.745832\n113.820816,22.744814\n113.821022,22.746197\n113.821022,22.746197\n113.820961,22.745832\n113.821022,22.746197\n113.821022,22.746197\n113.821022,22.746197\n113.821098,22.746784\n113.821098,22.746784\n113.821022,22.746197\n113.82119,22.747326\n113.82119,22.747326\n113.821182,22.747307\n113.821259,22.747807\n113.821289,22.748564\n113.821289,22.748564\n113.821243,22.747665\n113.821426,22.749662\n113.821426,22.749662\n113.821396,22.749506\n113.821625,22.751717\n113.821693,22.752256\n113.821693,22.752256\n113.821655,22.751907\n113.821701,22.752327\n113.821701,22.752327\n113.821701,22.752327\n113.821793,22.753176\n113.821716,22.752472\n113.82193,22.754564\n113.82206,22.755468\n113.822105,22.756086\n113.822037,22.755424\n113.822166,22.756693\n113.822289,22.757675\n113.822144,22.756746\n113.822289,22.757675\n113.822464,22.758768\n113.822342,22.758432\n113.822624,22.759687\n113.822624,22.759687\n113.82299,22.760826\n113.822517,22.759596\n113.82341,22.761662\n113.823792,22.762392\n113.823296,22.761457\n113.824448,22.763315\n113.82489,22.763876\n113.82428,22.763119\n113.824921,22.763933\n113.824921,22.763933\n113.824921,22.763933\n113.82489,22.763876\n113.824921,22.763933\n113.824921,22.763933\n113.825615,22.764824\n113.825615,22.764824\n113.826027,22.765392\n113.825966,22.765356\n113.82637,22.766508\n113.82637,22.766508\n113.826561,22.767464\n113.826218,22.766081\n113.826591,22.7679\n113.826591,22.7679\n113.826591,22.7679\n113.826569,22.768377\n113.826286,22.770016\n113.825455,22.772532\n113.826073,22.770674\n113.825188,22.773676\n113.825188,22.773676\n113.825066,22.774376\n113.825195,22.773582\n113.824829,22.775261\n113.824577,22.776199\n113.824745,22.775677\n113.824303,22.776705\n113.824547,22.776211\n113.823952,22.777756\n113.823502,22.779156\n113.823853,22.778032\n113.822868,22.781813\n113.822945,22.781189\n113.822563,22.782455\n113.822342,22.783396\n113.822815,22.782181\n113.82206,22.784582\n113.82206,22.784582\n113.822037,22.78446\n113.821617,22.786041\n113.821342,22.786823\n113.821465,22.786301\n113.821243,22.786964\n113.820892,22.788424\n113.820702,22.789532\n113.820702,22.789532\n113.820885,22.788519\n113.82045,22.790771\n113.820274,22.791672\n113.820328,22.791405\n113.820091,22.792532\n113.819954,22.793503\n113.820068,22.792547\n113.820168,22.794643\n113.821648,22.797115\n113.820343,22.795168\n113.822853,22.798096\n113.822594,22.797918\n113.824265,22.798777\n113.824265,22.798777\n113.827118,22.799503\n113.825996,22.799273".split("\n").distinct.map(s => Point(s.split(",")(0).toDouble, s.split(",")(1).toDouble))
    println(compareGesture(arrLine1_up,a1),compareGesture(arrLine1_down,a1))
  }
}
